<h1 align="center">IRIS</h1>

![splash](assets/splash.png)

> Project currently work in progress

# Rationale

- Create a tool for close friends and I to communicate securely over insecure channels.
- Easily spin out wallet software for another project I've been working on where most of the ECC logic comes from: https://github.com/ramity/ramium
- Explore compiling c++ executables for multiple platforms

# Planned design

- Designed for self-contained, USB-flashdrive environments in airgapped environments

# Planned features

- Dockerized development and build environments
- Portable 64-bit Window and 64-bit Linux binary executables

## Key formats
- ECC

## Key management
- Generation
- Storage
- Destruction

## Key operations
- Encryption
- Decryption
- Signing
- Verification

---

## Setting up dev environment
(Host computer)
```
docker compose up -d
# Enter container
docker exec -it iris_dev bash
```

## Compile cryptopp for both linux and windows platforms

(Inside container)
```
./scripts/lib/compile-all-cryptopp.sh
```

## Compile iris for both linux and windows platforms

(Inside container)
```
./scripts/build.sh
```

## Run linux tests

(Inside container)
```
./scripts/test.sh
```

## Compile ecc test for windows environment

(Inside container)
```
./scripts/w64-compile-ecc.sh
```

(Host computer - assuming windows environment)
```
./bin/win64-cc-test.exe
```

## A note on deterministic keys

Iris supports the use of a master seed that is akin to a [deterministic wallet](https://en.bitcoin.it/wiki/Deterministic_wallet). The master seed serves as the root from which all subsequent keypairs are derived. The generation process is deterministic, meaning that given the same master seed, iris will always produce the same sequence of keypairs. This property is crucial for keypair backup and recovery, as it allows users to regenerate their entire keypair sequence by simply knowing and inputting the master seed.

The use of a master seed does introduce a potential security risk. If an attacker gains access to the master seed, they can regenerate all the keypairs.

```
./iris keypair generate ./keys/private_key ./keys/public_key toUseEvenGoWantToDoLookMoreLike 42
```

> The `keypair generate` command generating the 42th derived key from the "toUseEvenGoWantToDoLookMoreLike" master seed.

In iris, deterministic keys are generated by hashing a provided seed string `(n * generation_difficulty) + 1` times (the `set_seed` method internally hashes the provided value). The `generation_difficulty` multiplier is present to slow down attacks against weak user-chosen strings.

After the rounds of hashing, the seed hash is then used by taking the first 32 bytes as a key and the following 16 bytes as an initialization vector to create a unqiue 256 bit AES key. This key is then used to deterministically generate a keypair.
